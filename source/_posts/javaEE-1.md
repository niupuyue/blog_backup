---
title: JavaEEè‡ªå­¦ä¹‹è·¯(ä¸€) mysql
date: 2016-12-07 20:37:03
tags:
  - java
---

# macä¸‹ä½¿ç”¨mysqlç¬”è®°
## é“¾æ¥mysql
æ‰“å¼€mysqlæœåŠ¡ï¼Œç„¶ååœ¨ç»ˆç«¯ä¸­è¾“å…¥
```
mysql -u root -p 123456
```
æˆ–è€…
```
mysql --user=root --host=3306 --password=123456
```
<!--more-->
## SQlè¯­å¥
SQLè¯­å¥æ˜¯ç»“æ„åŒ–æŸ¥è¯¢è¯­å¥
### SQLè¯­å¥åˆ†ç±»
1. æ•°æ®å®šä¹‰è¯­å¥ï¼šDDL  ç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡ï¼Œä¸€èˆ¬æ“ä½œæ•°æ®åº“ï¼Œè¡¨ï¼Œè§†å›¾ç­‰ï¼Œå…³é”®å­—create alter drop
2. æ•°æ®æ“ä½œè¯­å¥ï¼šDML  å¯¹æ•°æ®åº“ä¸­è¡¨æ•°æ®è¿›è¡Œæ“ä½œï¼Œå¢åˆ æ”¹æŸ¥  å…³é”®å­—insert delete update 
3. æ•°æ®æŸ¥è¯¢è¯­å¥ï¼šDQL  æŸ¥è¯¢æ•°æ®è¡¨ä¸­çš„è®°å½•ï¼Œå…³é”®å­—select where from
4. æ•°æ®æ§åˆ¶è¯­å¥ï¼šDCL  ç”¨æ¥å®šä¹‰æ•°æ®åº“è®¿é—®æƒé™å’Œå®‰å…¨çº§åˆ«ï¼Œä»¥åŠåˆ›å»ºç”¨æˆ·  å…³é”®å­—grant

### æ•°æ®åº“æ“ä½œ DataBase
#### åˆ›å»ºæ•°æ®åº“
```
create database æ•°æ®åº“å
create database æ•°æ®åº“å character set å­—ç¬¦é›†
```
#### æŸ¥çœ‹æ•°æ®åº“
```
show databases 
//æŸ¥çœ‹åˆ›å»ºæ•°æ®åº“æ—¶çš„è¯­å¥
show create database æ•°æ®åº“å
```
#### åˆ é™¤æ•°æ®åº“
```
drop database æ•°æ®åº“å
```
#### å…¶ä»–å‘½ä»¤
```
//åˆ‡æ¢æ•°æ®åº“
use æ•°æ®åº“å
//æŸ¥çœ‹å½“å‰æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“
select database()
```
### è¡¨æ“ä½œ
#### åˆ›å»ºè¡¨
```
create table è¡¨å (
    å­—æ®µå  å˜é‡  [çº¦æŸ],
    å­—æ®µå  å˜é‡  [çº¦æŸ]
)
```
> å­—ç¬¦ç±»å‹ varchar(n)
è¡¨å•çº¦æŸ

|çº¦æŸç±»å‹ | æè¿° |
|-------|------|
|ä¸»é”®çº¦æŸ | primary key è¢«ä¿®é¥°çš„å­—æ®µï¼Œå”¯ä¸€ï¼Œéç©º |
|å”¯ä¸€çº¦æŸ | unique è¢«ä¿®é¥°çš„å­—æ®µï¼Œå”¯ä¸€ |
|éç©ºçº¦æŸ | not null è¢«ä¿®é¥°çš„å­—æ®µï¼Œä¸ä¸ºç©º |

#### æŸ¥çœ‹è¡¨
```
//æŸ¥çœ‹æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨
show tables
//æŸ¥çœ‹è¡¨ç»“æ„
desc è¡¨å
```
#### åˆ é™¤è¡¨
```
drop table è¡¨å
```
#### ä¿®æ”¹è¡¨
1. alter table è¡¨å add åˆ—å ç±»å‹ çº¦æŸ   ----æ·»åŠ åˆ—
2. alter table è¡¨å modify åˆ—å ç±»å‹ çº¦æŸ  ---ä¿®æ”¹åˆ—ç±»å‹æˆ–è€…é•¿åº¦
3. alter table è¡¨å change æ—§åˆ—å æ–°åˆ—å ç±»å‹ çº¦æŸ  ---ä¿®æ”¹åˆ—å
4. alter table è¡¨å drop åˆ—å  ---åˆ é™¤åˆ—
5. rename table è¡¨å to æ–°è¡¨å  ---ä¿®æ”¹è¡¨å
6. alter table è¡¨å character set å­—ç¬¦é›†  ---ä¿®æ”¹è¡¨ç¼–ç 

### å­—æ®µç±»å‹

| åˆ†ç±» | ç±»å‹åç§° | è¯´æ˜ | å­˜å‚¨éœ€æ±‚ |
|----|----|----|----|
|æ•´å‹| int(integer) |æ™®é€šå¤§å°çš„æ•´å‹ | 4ä¸ªå­—èŠ‚ |
|å°æ•° | double(m,d) (m,æ•°å­—é•¿åº¦ï¼›d,å°æ•°ä½æ•°) | åŒç²¾åº¦æµ®ç‚¹ | 8ä¸ªå­—èŠ‚ |
|æ—¥æœŸç±»å‹|datetime | YYYY-MM-DD HH:MM:SS |8ä¸ªå­—èŠ‚|
|æ—¥æœŸç±»å‹|timestamp|YYYY-MM-DD HH:MM:SS |8ä¸ªå­—èŠ‚ |
|æ–‡æœ¬ï¼ŒäºŒè¿›åˆ¶ç±»å‹|varchar(n)|

### æ’å…¥è®°å½•
```
insert into è¡¨å (åˆ—å1ï¼Œåˆ—å2ï¼Œåˆ—å3...) values (å€¼1ï¼Œå€¼2ï¼Œå€¼3...)
insert into è¡¨å values (å€¼1ï¼Œå€¼2ï¼Œå€¼3...)   å‘è¡¨ä¸­æ’å…¥æ‰€æœ‰çš„åˆ—
```
> æ³¨æ„ï¼š
> 1. åˆ—åæ•°å’Œvaluesåé¢çš„å€¼çš„æ•°é‡ä¿æŒä¸€è‡´
> 2. åˆ—é¡ºåºå’Œæ’å…¥å€¼é¡ºåºä¸€è‡´
> 3. åˆ—ç±»å‹å’Œæ’å…¥å€¼çš„é¡ºåºä¸€è‡´
> 4. æ’å…¥å€¼ä¸èƒ½è¶…è¿‡æœ€å¤§é•¿åº¦
> 5. å€¼å¦‚æœæ˜¯å­—ç¬¦ä¸²æˆ–è€…æ—¥æœŸï¼Œéœ€è¦æ·»åŠ ''

### æ›´æ–°è®°å½•
```
update è¡¨å set å­—æ®µå=å€¼ï¼Œå­—æ®µå=å€¼ï¼Œå­—æ®µå=å€¼
update è¡¨å set å­—æ®µå=å€¼ï¼Œå­—æ®µå=å€¼ï¼Œå­—æ®µå=å€¼ where æ¡ä»¶
```
> æ³¨æ„ï¼š
> 1. åˆ—åç±»å‹è¦å’Œä¿®æ”¹å€¼ä¸€è‡´
> 2. ä¿®æ”¹å€¼æ—¶ä¸å¾—è¶…è¿‡æœ€å¤§é•¿åº¦
> 3. å€¼å¦‚æœæ˜¯å­—ç¬¦ä¸²æˆ–è€…æ—¥æœŸï¼Œæ·»åŠ ''

### åˆ é™¤è®°å½•
```
delete from è¡¨å where æ¡ä»¶
```

### æŸ¥è¯¢è®°å½•
#### ç®€å•æŸ¥è¯¢
1. æŸ¥è¯¢æ‰€æœ‰å•†å“ select * from product
2. æŸ¥è¯¢å•†å“å’Œä»·æ ¼ select pname,price from product
3. åˆ«åæŸ¥è¯¢ select * from product as p    select price as money from product
4. å»æ‰é‡å¤å€¼ select distinct price from product
#### æ¡ä»¶æŸ¥è¯¢
1. æŸ¥è¯¢å•†å“åç§°æ˜¯"æµ·å°”"çš„å•†å“ select * from product where pname = 'æµ·å°”'
2. æŸ¥è¯¢å•†å“ä»·æ ¼å¤§äº60 çš„  select * from product where price>60
åœ¨whereä¸­å¯ä»¥ä½¿ç”¨çš„è¿ç®—ç¬¦

| è¿ç®—ç¬¦ | æ ‡è¯† | æè¿° |
|----|----|----|
| æ¯”è¾ƒè¿ç®—ç¬¦ | > < >= <= <>  | æ— ğŸˆšï¸ |
|æ¯”è¾ƒè¿ç®—ç¬¦ | between ... and .. | åœ¨æŸä¸€ä¸ªåŒºé—´çš„å€¼ï¼ŒåŒ…å«|
| æ¯”è¾ƒè¿ç®—ç¬¦ | in(set)| æ˜¾ç¤ºåœ¨inåˆ—è¡¨ä¸­çš„å€¼|
|æ¯”è¾ƒè¿ç®—ç¬¦ | like 'å¼ pattern' | æ¨¡ç³ŠæŸ¥è¯¢  %è¡¨ç¤ºé›¶ä¸ªæˆ–å¤šä¸ªä»»æ„å­—ç¬¦  _è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ |
| æ¯”è¾ƒè¿ç®—ç¬¦ | is null | åˆ¤æ–­æ˜¯å¦ä¸ºç©º |
| é€»è¾‘è¿ç®—ç¬¦ | and | å¤šä¸ªæ¡ä»¶åŒæ—¶æˆç«‹ |
| é€»è¾‘è¿ç®—ç¬¦ | or| å¤šä¸ªæ¡ä»¶æˆç«‹ä¸€ä¸ªå³å¯ |
|é€»è¾‘è¿ç®—ç¬¦ | not | ä¸æˆç«‹ |

#### æ’åº
1. asc  å‡åº
2. desc  é™åº

#### èšåˆ
å¸¸ç”¨çš„èšåˆå‡½æ•°æ˜¯sum(),avg(),max(),min()

#### åˆ†ç»„
1. æ ¹æ®cidåˆ†ç»„ï¼Œå¹¶ä¸”è®¡ç®—æ¯ä¸ªç»„çš„ä¸ªæ•° select cid,count(*) from product group by cid;
2. æ ¹æ®cidåˆ†ç»„ï¼Œå¹¶ä¸”è®¡ç®—æ¯ç»„çš„å¹³å‡ä»·æ ¼ï¼Œå¹¶ä¸”æ‰“å°å‡ºå¤§äº60çš„ select cid,avg(price) from product group by cid having avg(price) > 60

> æŸ¥è¯¢è¯­å¥æ€»ç»“:
> select distince * |å­—æ®µ... from è¡¨ where æŸ¥è¯¢æ¡ä»¶ group by åˆ†ç»„å­—æ®µ having åˆ†ç»„æ¡ä»¶ order by é™åº|å‡åº

#### å®ç°å¤–é”®è”çº§åˆ é™¤
åˆ›å»ºä¸¤ä¸ªæ•°æ®è¡¨personså’Œorders
```
create table persons (
  p_id int primary key,
  p_name varchar(10),
  order_id int
);
```
```
create table orders(
  order_id int primary key,
  order_name varchar(20)
);
```
å¦‚ä¸Šæ‰€ç¤ºä¸¤ä¸ªè¡¨ï¼Œå…¶ä¸­personsä¸­çš„order_idæ˜¯å¤–é”®ï¼Œordersä¸­çš„order_idæ˜¯ä¸»é”®ï¼Œæˆ‘ä»¬çš„è¦æ±‚æ˜¯å¦‚æœåˆ é™¤ordersä¸­çš„ä¸€ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆå¤–é”®çš„å“åº”å¯¹è±¡å°±è¦è¢«åˆ é™¤.éœ€è¦åœ¨å¤–é”®çš„è¡¨ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç 
```
alter table persons add constraint fk_persons foreign key (order_id) references orders (order_id) ON DELETE CASCADE;
```

### sqlè¯­å¥ç»ƒä¹ 



